.\" -*- mode: troff; coding: UTF-8 -*-
.\" %%%LICENSE_START(PUBLIC_DOMAIN)
.\" This page is in the public domain. - aeb
.\" %%%LICENSE_END
.\"
.\"*******************************************************************
.\"
.\" This file was generated with po4a. Translate the source file.
.\"
.\"*******************************************************************
.TH GRANTPT 3 2017\-09\-15 GNU "Руководство программиста Linux"
.SH ИМЯ
grantpt \- разрешает доступ для подчинённому псевдотерминалу
.SH ОБЗОР
\fB#include <stdlib.h>\fP
.PP
\fBint grantpt(int \fP\fIfd\fP\fB);\fP
.PP
.in -4n
Требования макроса тестирования свойств для glibc
(см. \fBfeature_test_macros\fP(7)):
.in
.PP
.ad l
\fBgrantpt\fP():
.br
.RS 4
начиная с glibc 2.24:
    _XOPEN_SOURCE\ >=\ 500 ||
        (_XOPEN_SOURCE\ &&\ _XOPEN_SOURCE_EXTENDED)
.br
glibc 2.23 и старее:
    _XOPEN_SOURCE
.RE
.ad
.SH ОПИСАНИЕ
Функция \fBgrantpt\fP() изменяет режим и владельца для устройства подчинённого
псевдотерминала, соответствующего основному псевдотерминалу, на который
ссылается \fIfd\fP. Идентификатор пользователя подчинённого устанавливается в
действительный UID вызывающего процесса. Идентификатор группы
устанавливается в неопределенное значение (например, \fItty\fP). Права доступа
к подчинённому псевдотерминала назначаются как 0620 (crw\-\-w\-\-\-\-).
.PP
Поведение \fBgrantpt\fP() не определено, если установлен обработчик сигналов
для перехвата сигналов \fBSIGCHLD\fP.
.SH "ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ"
При успешном выполнении \fBgrantpt\fP() возвращает 0. Иначе возвращается \-1 и
переменная \fIerrno\fP устанавливается соответствующим образом.
.SH ОШИБКИ
.TP 
\fBEACCES\fP
Невозможно получить доступ к соответствующему подчинённому псевдотерминалу.
.TP 
\fBEBADF\fP
Аргумент \fIfd\fP не является правильным открытым файловым дескриптором.
.TP 
\fBEINVAL\fP
Значение \fIfd\fP корректно, но не связано с основным псевдотерминалом.
.SH ВЕРСИИ
Функция \fBgrantpt\fP() появилась в glibc начиная с версии 2.1.
.SH АТРИБУТЫ
Описание терминов данного раздела смотрите в \fBattributes\fP(7).
.TS
allbox;
lb lb lb
l l l.
Интерфейс	Атрибут	Значение
T{
\fBgrantpt\fP()
T}	Безвредность в нитях	MT\-Safe locale
.TE
.sp 1
.SH "СООТВЕТСТВИЕ СТАНДАРТАМ"
POSIX.1\-2001, POSIX.1\-2008.
.SH ЗАМЕЧАНИЯ
Является частью поддержки псевдотерминалов UNIX 98 (смотрите \fBpts\fP(4)).
.PP
Многие системы реализуют эту функцию через вспомогательный исполняемый файл
с установленным битом SUID, называемый «pt_chown». Благодаря файловой
системе Linux devpts (начиная с Linux 2.2), ядро обычным образом
устанавливает корректные значения владельца и права на подчинённый
псевдотерминал когда открывается основной (\fBposix_openpt\fP(3)), поэтому
\fBgrantpt\fP() делать ничего не нужно. Таким образом, подобный вспомогательный
файл не требуется ( и действительно, это значение пусто при сборке glibc,
которая используется во многих системах).
.SH "СМОТРИТЕ ТАКЖЕ"
\fBopen\fP(2), \fBposix_openpt\fP(3), \fBptsname\fP(3), \fBunlockpt\fP(3), \fBpts\fP(4),
\fBpty\fP(7)
