.\" -*- mode: troff; coding: UTF-8 -*-
'\" t
.\" Copyright (c) 1993 Michael Haardt (michael@cantor.informatik.rwth-aachen.de)
.\" and 1994,1995 Alain Knaff (Alain.Knaff@imag.fr)
.\"
.\" %%%LICENSE_START(GPLv2+_DOC_FULL)
.\" This is free documentation; you can redistribute it and/or
.\" modify it under the terms of the GNU General Public License as
.\" published by the Free Software Foundation; either version 2 of
.\" the License, or (at your option) any later version.
.\"
.\" The GNU General Public License's references to "object code"
.\" and "executables" are to be interpreted as the output of any
.\" document formatting or typesetting system, including
.\" intermediate and printed output.
.\"
.\" This manual is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public
.\" License along with this manual; if not, see
.\" <http://www.gnu.org/licenses/>.
.\" %%%LICENSE_END
.\"
.\" Modified, Sun Feb 26 15:00:02 1995, faith@cs.unc.edu
.\"
.\"*******************************************************************
.\"
.\" This file was generated with po4a. Translate the source file.
.\"
.\"*******************************************************************
.TH FD 4 2014\-05\-10 Linux "Руководство программиста Linux"
.SH ИМЯ
fd \- устройство для работы с дисководом
.SH НАСТРОЙКА
Дисководы гибких дисков — блочные устройства со старшим номером 2. Обычно их
владельцем является root.floppy (т.е. пользователь root, группа floppy), а
права доступа к ним — 0660 (доступно членам группы) или 0666 (доступно
всем). Младший номер определяется типом устройства, номером устройства, и
номером контроллера. Для каждого типа устройства, то есть комбинации объёма
и количества дорожек, существует базовый младший номер. К этому базовому
номеру прибавьте номер устройства в пределах его контроллера и ещё 128, если
дисковод подключен к вторичному контроллеру. В нижеследующих таблицах \fIn\fP
означает номер дисковода.
.PP
\fBПредупреждение: Если вы используете формат дискет с большим числом
дорожек, чем поддерживает ваш дисковод, вы можете вызвать механическое
повреждение.\fP Однократная попытка поработать с числом дорожек больше обычных
40/80, не должна его повредить, но нет гарантии, что этого не
произойдет. Если вы не уверены, не создавайте устройства для таких форматов,
чтобы предотвратить их использование.
.PP
Файлы устройств, не зависящие от дисковода, которые автоматически определяют
формат носителя и ёмкость диска:
.TS
l c
l c.
Имя	Основной
	младший №
_
\fBfd\fP\fIn\fP	0
.TE
.PP
Файлы устройств с носителями 5.25 дюймов с двойной плотностью:
.TS
lw(1i) l l l l c
lw(1i) c c c c c.
Имя	Ёмкость	Цил.	Сект.	Головок	Основной
	КиБ				младший №
_
\fBfd\fP\fIn\fP\fBd360\fP	360	40	9	2	4
.TE
.PP
Файлы устройств с носителями 5.25 дюйма и повышенной плотностью:
.TS
lw(1i) l l l l c
lw(1i) c c c c c.
Имя	Ёмкость	Цил.	Сект.	Головок	Основной
	КиБ				младший №
_
\fBfd\fP\fIn\fP\fBh360\fP	360	40	9	2	20
\fBfd\fP\fIn\fP\fBh410\fP	410	41	10	2	48
\fBfd\fP\fIn\fP\fBh420\fP	420	42	10	2	64
\fBfd\fP\fIn\fP\fBh720\fP	720	80	9	2	24
\fBfd\fP\fIn\fP\fBh880\fP	880	80	11	2	80
\fBfd\fP\fIn\fP\fBh1200\fP	1200	80	15	2	8
\fBfd\fP\fIn\fP\fBh1440\fP	1440	80	18	2	40
\fBfd\fP\fIn\fP\fBh1476\fP	1476	82	18	2	56
\fBfd\fP\fIn\fP\fBh1494\fP	1494	83	18	2	72
\fBfd\fP\fIn\fP\fBh1600\fP	1600	80	20	2	92
.TE
.PP
Файлы устройств с носителями 3.5 дюйма и двойной плотностью:
.TS
lw(1i) l l l l c
lw(1i) c c c c c.
Имя	Ёмкость	Цил.	Сект.	Головок	Основной
	КиБ				младший №
_
\fBfd\fP\fIn\fP\fBu360\fP	360	80	9	1	12
\fBfd\fP\fIn\fP\fBu720\fP	720	80	9	2	16
\fBfd\fP\fIn\fP\fBu800\fP	800	80	10	2	120
\fBfd\fP\fIn\fP\fBu1040\fP	1040	80	13	2	84
\fBfd\fP\fIn\fP\fBu1120\fP	1120	80	14	2	88
.TE
.PP
Файлы устройств с носителями 3.5 дюйма и повышенной плотностью:
.TS
lw(1i) l l l l c
lw(1i) c c c c c.
Имя	Ёмкость	Цил.	Сект.	Головок	Основной
	КиБ				младший №
_
\fBfd\fP\fIn\fP\fBu360\fP	360	40	9	2	12
\fBfd\fP\fIn\fP\fBu720\fP	720	80	9	2	16
\fBfd\fP\fIn\fP\fBu820\fP	820	82	10	2	52
\fBfd\fP\fIn\fP\fBu830\fP	830	83	10	2	68
\fBfd\fP\fIn\fP\fBu1440\fP	1440	80	18	2	28
\fBfd\fP\fIn\fP\fBu1600\fP	1600	80	20	2	124
\fBfd\fP\fIn\fP\fBu1680\fP	1680	80	21	2	44
\fBfd\fP\fIn\fP\fBu1722\fP	1722	82	21	2	60
\fBfd\fP\fIn\fP\fBu1743\fP	1743	83	21	2	76
\fBfd\fP\fIn\fP\fBu1760\fP	1760	80	22	2	96
\fBfd\fP\fIn\fP\fBu1840\fP	1840	80	23	2	116
\fBfd\fP\fIn\fP\fBu1920\fP	1920	80	24	2	100
.TE
.PP
Файлы устройств с носителями 3.5 дюйма и сверх плотностью:
.TS
lw(1i) l l l l c
lw(1i) c c c c c.
Имя	Ёмкость	Цил.	Сект.	Головок	Основной
	КиБ				младший №
_
\fBfd\fP\fIn\fP\fBu2880\fP	2880	80	36	2	32
\fBfd\fP\fIn\fP\fBCompaQ\fP	2880	80	36	2	36
\fBfd\fP\fIn\fP\fBu3200\fP	3200	80	40	2	104
\fBfd\fP\fIn\fP\fBu3520\fP	3520	80	44	2	108
\fBfd\fP\fIn\fP\fBu3840\fP	3840	80	48	2	112
.TE
.SH ОПИСАНИЕ
Специальные файлы \fBfd\fP обеспечивают доступ к дисководам в режиме без
обработки (raw mode). Устройства \fBfd\fP поддерживают следующие вызовы
\fBioctl\fP(2):
.IP \fBFDCLRPRM\fP
Очищает информацию о носителе в дисководе (геометрию диска в дисководе).
.IP \fBFDSETPRM\fP
Устанавливает информацию о носителе в дисководе. Информация о носителе
потеряется, когда носитель будет сменён.
.IP \fBFDDEFPRM\fP
Устанавливает информацию о носителе в дисководе (геометрию диска в
дисководе). Информация о носителе не будет потеряна, когда носитель будет
сменён. При этом автоопределение носителя будет выключено. Чтобы снова его
включить, выполните \fBFDCLRPRM\fP.
.IP \fBFDGETDRVTYP\fP
Возвращает тип дисковода (параметр имени). Для форматов, работающих на
нескольких типах дисководов, \fBFDGETDRVTYP\fP возвращает имя, соответствующее
самому старому типу дисковода, который поддерживает данный формат.
.IP \fBFDFLUSH\fP
Объявляет недействительными данные буферного кэша указанного привода.
.IP \fBFDSETMAXERRS\fP
Устанавливает пороговые значения для сообщения об ошибках, остановки
действий, перекалибровки, сброса в начальное состояние и посекторного
чтения.
.IP \fBFDSETMAXERRS\fP
Возвращает текущие пороговые значения для ошибок.
.IP \fBFDGETDRVTYP\fP
Возвращает внутреннее имя дисковода.
.IP \fBFDWERRORCLR\fP
Очищает статистику ошибок записи.
.IP \fBFDWERRORGET\fP
Читает статистику ошибок записи. Она включает общее число ошибок записи,
расположение и диск, на котором произошла первая ошибка записи, и
расположение и диск, на котором произошла последняя ошибка записи. Диски
обозначаются генерирующимся числом, которое увеличивается на единицу при
(почти) каждой смене диска.
.IP \fBFDTWADDLE\fP
Выключает на несколько микросекунд мотор привода. Это может быть необходимо
для получения доступа к диску, чьи сектора располагаются слишком близко друг
к другу.
.IP \fBFDSETDRVPRM\fP
Устанавливает различные параметры дисковода.
.IP \fBFDGETDRVPRM\fP
Возвращает различные параметры.
.IP \fBFDGETDRVSTAT\fP
Возвращает кэшированное состояние дисковода (диск сменён, защищён от записи
и т. д.)
.IP \fBFDPOLLDRVSTAT\fP
Обращается к дисководу и возвращает его состояние.
.IP \fBFDGETFDCSTAT\fP
Возвращает состояние контроллера дисководов.
.IP \fBFDRESET\fP
Сбрасывает в начальное состояние контроллер дисководов при определённых
условиях.
.IP \fBFDRAWCMD\fP
Посылает команду в необработанном виде (raw command) контроллеру дисководов.
.PP
За более точной информацией обратитесь также к файлам
\fI<linux/fd.h>\fP и \fI<linux/fdreg.h>\fP, а также к справочной
странице \fBfloppycontrol\fP(1).
.SH ФАЙЛЫ
\fI/dev/fd*\fP
.SH ЗАМЕЧАНИЯ
Разные форматы позволяют читать и записывать многие типы дисков. Однако,
если дискета отформатирована со слишком маленьким межсекторным промежутком,
производительность может снизиться вплоть до того, что для доступа к дорожке
может понадобиться несколько секунд. Во избежание этого, используйте
перемежающиеся (interleaved) форматы.
.PP
Невозможно прочитать дискеты, отформатированные с использованием GCR
(групповая запись кодов), которые используются компьютерами Apple II и
Macintosh (диски 800k).
.PP
.\" .SH AUTHORS
.\" Alain Knaff (Alain.Knaff@imag.fr), David Niemi
.\" (niemidc@clark.net), Bill Broadhurst (bbroad@netcom.com).
Чтение аппаратно размеченных на секторы дискет (с отверстием на каждый
сектор и слегка повернутым индексным отверстием) не поддерживается. Такими
были старые 8\-дюймовые дискеты.
.SH "СМОТРИТЕ ТАКЖЕ"
\fBchown\fP(1), \fBfloppycontrol\fP(1), \fBgetfdprm\fP(1), \fBmknod\fP(1),
\fBsuperformat\fP(1), \fBmount\fP(8), \fBsetfdprm\fP(8)
