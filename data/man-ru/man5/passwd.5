.\" -*- mode: troff; coding: UTF-8 -*-
.\" Copyright (c) 1993 Michael Haardt (michael@moria.de),
.\"     Fri Apr  2 11:32:09 MET DST 1993
.\"
.\" %%%LICENSE_START(GPLv2+_DOC_FULL)
.\" This is free documentation; you can redistribute it and/or
.\" modify it under the terms of the GNU General Public License as
.\" published by the Free Software Foundation; either version 2 of
.\" the License, or (at your option) any later version.
.\"
.\" The GNU General Public License's references to "object code"
.\" and "executables" are to be interpreted as the output of any
.\" document formatting or typesetting system, including
.\" intermediate and printed output.
.\"
.\" This manual is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public
.\" License along with this manual; if not, see
.\" <http://www.gnu.org/licenses/>.
.\" %%%LICENSE_END
.\"
.\" Modified Sun Jul 25 10:46:28 1993 by Rik Faith (faith@cs.unc.edu)
.\" Modified Sun Aug 21 18:12:27 1994 by Rik Faith (faith@cs.unc.edu)
.\" Modified Sun Jun 18 01:53:57 1995 by Andries Brouwer (aeb@cwi.nl)
.\" Modified Mon Jan  5 20:24:40 MET 1998 by Michael Haardt
.\"  (michael@cantor.informatik.rwth-aachen.de)
.\"*******************************************************************
.\"
.\" This file was generated with po4a. Translate the source file.
.\"
.\"*******************************************************************
.TH PASSWD 5 2018\-04\-30 Linux "Руководство программиста Linux"
.SH ИМЯ
passwd \- файл паролей
.SH ОПИСАНИЕ
В текстовом файле \fI/etc/passwd\fP содержится список учётных записей
пользователей в системе. Файл должен быть доступен для чтения всем
пользователям (многие утилиты, такие как \fBls\fP(1), используют его, чтобы
преобразовывать идентификаторы пользователей в их имена), но доступ на
запись должен предоставляться только суперпользователю.
.PP
В старые добрые времена не существовало большой проблемы, связанной с
доступностью этого файла на чтение для всех. Любой мог прочитать
зашифрованные пароли, но мощности компьютеров не хватало для подбора
грамотно выбранных паролей, а кроме того, наивно предполагалось, что сеть
используется дружественным сообществом пользователей. В наши дни, многие
пользователи стали использовать механизм теневых паролей, где файл
\fI/etc/passwd\fP содержит \(aqx\(aq в поле пароля, а зашифрованные пароли
хранятся в файле \fI/etc/shadow\fP, который доступен на чтение только
суперпользователю.
.PP
Если значение шифрованного пароля, в \fI/etc/passwd\fP или \fI/etc/shadow\fP,
равно пустой строке, то вход будет разрешён без запроса пароля. Заметим, что
данной свойство может быть специально отключено в приложениях или может
настраиваться (например, с помощью аргументов «nullok» или «nonull»модуля
pam_unix.so).
.PP
Если значение шифрованного пароля в \fI/etc/passwd\fP равно «\fI*NP*\fP» (без
кавычек), то теневая запись запрашивается с сервера NIS+.
.PP
Вне зависимости от того, применяется ли механизм теневых паролей или нет,
многие системные администраторы ставят звёздочку (*) в поле зашифрованного
пароля, чтобы быть уверенными, что данный пользователь не пройдёт
аутентификацию, используя какой\-либо пароль (но смотри раздел ЗАМЕЧАНИЯ
далее).
.PP
Если вы создаёте новую учётную запись, сперва в поле пароля помещается
звёздочка (*), а затем с помощью команды \fBpasswd\fP(1) вы можете задать
пароль.
.PP
Каждая строка файла состоит из семи полей, разделённых двоеточием и
описывает одного пользователя:
.PP
.in +4n
.EX
name:password:UID:GID:GECOS:directory:shell
.EE
.in
.PP
Поля:
.TP  12
\fIимя\fP
Имя пользователя в системе. Оно не должно содержать букв в верхнем регистре.
.TP 
\fIпароль\fP
Может содержать шифрованный пароль пользователя, звёздочку (*) или букву
\(aqx\(aq (про \(aqx\(aq см. в \fBpwconv\fP(8)).
.TP 
\fIUID\fP
Привилегированная учётная запись \fIroot\fP (суперпользователь) имеет
идентификатор пользователя равный 0.
.TP 
\fIGID\fP
Числовой идентификатор первичной группы (GID) пользователя. Дополнительные
группы пользователя могут быть заданы в файле групп системы; смотрите
\fBgroup\fP(5).
.TP 
\fIGECOS\fP
Данное поле является необязательным и используется только для информационных
целей. Обычно, оно содержит полное имя пользователя. Некоторые программы
(например, \fBfinger\fP(1)) показывают значение этого поля.
.IP
GECOS — это аббревиатура от General Electric Comprehensive Operating System,
которая была переименована в GCOS, когда подразделение больших систем
компании GE было продано компании Honeywell. Денис Ритчи писал: «Иногда мы
направляем вывод печати или пачку заданий на GCOS машину. Поле gcos в файле
паролей было местом, где хранилась информация для $IDENTcard. Не элегантно.»
.TP 
\fIкаталог\fP
Домашний каталог пользователя: начальный каталог, куда попадает пользователь
после входа в систему. Значение данного поля используется для настройки
переменной окружения \fBHOME\fP.
.TP 
\fIоболочка\fP
Это программа, которая запускается после входа в систему (если это поле
пустое, то используется \fI/bin/sh\fP). Если в поле указан несуществующий
исполняемый файл, то пользователь не сможет войти в систему с помощью
\fBlogin\fP(1). Значение данного поля используется для настройки переменной
окружения \fBSHELL\fP.
.SH ФАЙЛЫ
\fI/etc/passwd\fP
.SH ЗАМЕЧАНИЯ
Если вы хотите создать группу пользователя, то такая группа должна
существовать в файле \fI/etc/group\fP, иначе группа не будет существовать.
.PP
Если вместо зашифрованного пароля установлена звёздочка (*), то пользователь
не сможет войти в систему, используя команду \fBlogin\fP(1), но сможет войти в
систему, используя \fBrlogin\fP(1), запустить существующие процессы и
инициировать новые, используя \fBrsh\fP(1), \fBcron\fP(8), \fBat\fP(1) или почтовые
фильтры и т.д. Попытка заблокировать учётную запись простым изменением поля
shell, даст тот же результат и в дополнении разрешит использование \fBsu\fP(1).
.SH "СМОТРИТЕ ТАКЖЕ"
\fBchfn\fP(1), \fBchsh\fP(1), \fBlogin\fP(1), \fBpasswd\fP(1), \fBsu\fP(1), \fBcrypt\fP(3),
\fBgetpwent\fP(3), \fBgetpwnam\fP(3), \fBgroup\fP(5), \fBshadow\fP(5), \fBvipw\fP(8)
